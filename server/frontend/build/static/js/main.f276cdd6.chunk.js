(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(11),o=n.n(s),i=(n(144),n(233)),u=n(251),l=n(248),p=n(249),d=n(14),j=n(18),b=n(7),h=n.n(b),x=n(13),f=n(235),g=n(237),m=n(238),O=n(206),v=n(5),w=n(71),y=n(12),C=n(118),k=n(2),N=Object(r.createContext)(null),S=function(e){var t=e.children,n=Object(r.useState)(),a=Object(y.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)({}),i=Object(y.a)(o,2),u=i[0],l=i[1],p=Object(r.useState)(!1),d=Object(y.a)(p,2),j=d[0],b=d[1],h=Object(r.useRef)();return Object(r.useEffect)((function(){h.current=Object(C.io)("https://whatsappsocket.herokuapp.com/")}),[]),Object(k.jsx)(N.Provider,{value:{account:c,setAccount:s,socket:h,setActiveUsers:l,activeUsers:u,setFlag:b,flag:j},children:t})},I="847743167985-4qnvk3ntj6gr3kcsh12udqsope2ejpop.apps.googleusercontent.com",_=n(39),U=n.n(_),P="https://whatsappclone31.herokuapp.com",F=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user_id,a=t.imageUrl,r=t.email,c=t.name,e.prev=1,e.next=4,U.a.post("".concat(P,"/addUser"),{user_id:n,imageUrl:a,email:r,name:c},{headers:{"Content-Type":"application/json"}});case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.log("Error While calling Add User",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("".concat(P,"/getUsers"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error While calling Get User",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post("".concat(P,"/conversation"),t,{headers:{"Content-Type":"application/json"}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error While calling Set User",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.post("".concat(P,"/conversation/get"),t,{headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error While calling Get Conversation",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",U.a.post("".concat(P,"/message/add"),t,{headers:{"Content-Type":"application/json"}}));case 4:e.prev=4,e.t0=e.catch(0),console.log("Error While calling New Message",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",U.a.get("".concat(P,"/message/get/").concat(t)));case 4:e.prev=4,e.t0=e.catch(0),console.log("Error While calling get Message",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",U.a.post("".concat(P,"/user/nameChange"),t,{headers:{"Content-Type":"application/json"}}));case 4:e.prev=4,e.t0=e.catch(0),console.log("Error While change Name",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",U.a.post("".concat(P,"/user/updatePic"),t,{headers:{"Content-Type":"application/json"}}));case 4:e.prev=4,e.t0=e.catch(0),console.log("Error While Updating Pic",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}(),B=n(86),D=Object(i.a)({component:{display:"flex"},leftComponent:{padding:"56px 0 56px 56px"},qrCode:{height:"264px",width:"264px",padding:"50px 0 0 50px"},title:{fontSize:"26px",marginBottom:"25px",color:"#525252",fontFamily:"Segoe UI",fontWeight:300},list:{"& > *":{fontSize:"18px",padding:0,marginTop:"15px",lineHeight:"28px",color:"#484848"}},button:{padding:"8px",border:"2px solid black",color:"white",textAlign:"center",background:"#128c7e",textDecoration:"none",margin:"auto",boxShadow:"0px 2px 8px rgba(0,0,0,0.6)"}}),M=Object(v.a)({dialogPaper:{height:"95%",width:"65%",marginTop:"12%",maxHeight:"100%",maxWidth:"100%",overflow:"hidden"}})((function(e){var t=e.classes,n=Object(r.useContext)(N),a=(n.account,n.setAccount),c=D(),s=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({user_id:t.profileObj.googleId,imageUrl:t.profileObj.imageUrl,email:t.profileObj.email,name:t.profileObj.name});case 2:n=e.sent,console.log(n.data),"User Already Exist"===n.data.message?a({user_id:n.data.exist.user_id,imageUrl:n.data.exist.imageUrl,email:n.data.exist.email,name:n.data.exist.name}):a({user_id:t.profileObj.googleId,imageUrl:t.profileObj.imageUrl,email:t.profileObj.email,name:t.profileObj.name});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(f.a,{open:!0,classes:{paper:t.dialogPaper},BackdropProps:{style:{backgroundColor:"unset"}},children:[Object(k.jsxs)(u.a,{className:c.component,children:[Object(k.jsxs)(u.a,{className:c.leftComponent,children:[Object(k.jsx)(g.a,{className:c.title,children:"To use Whatsapp on your computer"}),Object(k.jsxs)(m.a,{className:c.list,children:[Object(k.jsx)(O.a,{children:"1. Open Whastapp on your phone"}),Object(k.jsx)(O.a,{children:"2. Tap Menu or Setting and Select Linked Devices"}),Object(k.jsx)(O.a,{children:"3. Point your phone to this screen to capture the code"})]})]}),Object(k.jsxs)(u.a,{style:{position:"relative"},children:[Object(k.jsx)("img",{src:"https://www.ginifab.com/feeds/qr_code/img/qrcode.jpg",alt:"qr",className:c.qrCode}),Object(k.jsx)(u.a,{style:{position:"absolute",left:"50%",top:"50%"},children:Object(k.jsx)(w.GoogleLogin,{clientId:I,buttonText:"",isSignedIn:!0,onSuccess:s,onFailure:function(){console.log("Error")},cookiePolicy:"single_host_origin"})})]})]}),Object(k.jsx)(u.a,{style:{textAlign:"center"},children:Object(k.jsx)(B.a,{to:"/sawo-auth",className:c.button,children:"Login with SAWO"})})]})})),H=n(124),q=n.n(H),V=Object(i.a)({component:{display:"flex",justifyContent:"center"},leftComponent:{padding:"56px 0 56px 56px"},qrCode:{height:"264px",width:"264px",padding:"50px 0 0 50px"},title:{fontSize:"26px",marginBottom:"25px",color:"#525252",fontFamily:"Segoe UI",fontWeight:300},list:{"& > *":{fontSize:"18px",padding:0,marginTop:"15px",lineHeight:"28px",color:"#484848"}}}),G=Object(v.a)({dialogPaper:{height:"95%",width:"65%",marginTop:"12%",maxHeight:"100%",maxWidth:"100%",overflow:"hidden"}})((function(e){var t=e.classes,n=Object(j.a)(),a=Object(r.useContext)(N),c=(a.account,a.setAccount);function s(){return(s=Object(x.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({user_id:t.user_id,imageUrl:"https://cdn.onlinewebfonts.com/svg/img_275469.png",email:t.identifier,name:t.customFieldInputValues.Name});case 2:"User Already Exist"===(a=e.sent).data.message?c({user_id:a.data.exist.user_id,imageUrl:a.data.exist.imageUrl,email:a.data.exist.email,name:a.data.exist.name}):c({user_id:t.user_id,imageUrl:"https://cdn.onlinewebfonts.com/svg/img_275469.png",email:t.identifier,name:t.customFieldInputValues.Name}),n.push("/");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var o=V(),i={onSuccess:function(e){return s.apply(this,arguments)},identifierType:"email",apiKey:"d7e4ff49-dd6c-4d6b-ad40-c5384d31d028",containerHeight:"500px"};return Object(k.jsx)(f.a,{open:!0,classes:{paper:t.dialogPaper},BackdropProps:{style:{backgroundColor:"unset"}},children:Object(k.jsx)(u.a,{className:o.component,children:Object(k.jsxs)("div",{id:"login-container",children:[Object(k.jsx)("h1",{className:"title",style:{textAlign:"center"},children:"SAWO Login"}),Object(k.jsx)(q.a,{config:i})]})})})})),K=n(207),J=n(239),Q=Object(i.a)((function(e){return{components:{backgroundColor:"#f6f6f6",height:43,display:"flex",alignItems:"center"},search:{position:"relative",borderRadius:18,backgroundColor:"#FFFFFF",margin:"0 13px",width:"130%"},searchIcon:{color:"#919191",padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"65px",fontSize:14,height:15,transition:e.transitions.create("width"),width:"100%"}}})),Y=function(e){var t=e.setInput,n=Q();return Object(k.jsx)(u.a,{className:n.components,children:Object(k.jsx)(u.a,{children:Object(k.jsxs)("div",{className:n.search,children:[Object(k.jsx)("div",{className:n.searchIcon,children:Object(k.jsx)(J.a,{fontSize:"small"})}),Object(k.jsx)(K.a,{placeholder:"Search or Start a new chat",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){return t(e.target.value)}})]})})})},X=n(244),Z=n(242),$=n(128),ee=n(243),te=n(253),ne=n(241),ae=n(67),re=n(252),ce=n(240),se=n(126),oe=n.n(se),ie=n(125),ue=n.n(ie),le=Object(i.a)({imageContainer:{display:"flex",justifyContent:"center",alignItems:"center"},displayPicture:{borderRadius:"50%",width:150,height:150,padding:"18px 0px"},nameContainer:{backgroundColor:"#FFF",padding:"12px 30px 2px",boxShadow:"0 1px 3px rgba(0,0,0,0.08)","& :first-child":{fontSize:14,color:"#009688"},"& :last-child":{color:"#4a4a4a",margin:"14px 0px"}},description:{padding:"10px 20px 28px 30px","& > * ":{fontSize:12,color:"rgba(0,0,0,0.45)"}},nameInput:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"0px"}}),pe=Object(v.a)({inputField:{margin:"0px!important"}})((function(e){var t=e.classes,n=Object(r.useRef)(),a=Object(r.useContext)(N),c=a.account,s=a.setAccount,o=Object(r.useState)(""),i=Object(y.a)(o,2),l=i[0],p=i[1],d=Object(r.useState)(!0),j=Object(y.a)(d,2),b=j[0],f=j[1],m=le(),O=Object(r.useState)(""),v=Object(y.a)(O,2),w=v[0],C=v[1];Object(r.useEffect)((function(){p(c.name)}),[]),Object(r.useEffect)((function(){0==b&&n.current.focus()}),[b]);var S=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={userId:c.user_id,name:l},e.next=3,z(t);case 3:n=e.sent,console.log(n),s((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{name:l})}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(u.a,{className:m.imageContainer,children:Object(k.jsx)("img",{src:c.imageUrl,alt:"dp",className:m.displayPicture})}),Object(k.jsxs)(u.a,{className:m.imageContainer,children:[Object(k.jsx)(re.a,{id:"standard-basic",variant:"standard",type:"file",classes:{input:t.inputField},onChange:function(e){return C(e.target.files[0])}}),Object(k.jsx)(ue.a,{onClick:function(){if(w){var e=new FormData;e.append("file",w),e.append("upload_preset","insta-clone"),e.append("cloud_name","instagram-clone31"),fetch("https://api.cloudinary.com/v1_1/instagram-clone31/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){var t=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:c.user_id,pic:t.url},e.next=3,R(n);case 3:a=e.sent,console.log(a),s((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{imageUrl:t.url})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t(e)})).catch((function(e){console.log(e)}))}}})]}),Object(k.jsxs)(u.a,{className:m.nameContainer,children:[Object(k.jsx)(g.a,{children:"Your name"}),Object(k.jsxs)(u.a,{className:m.nameInput,style:{margin:"0px"},children:[Object(k.jsx)(ce.a,{value:l,classes:{input:t.inputField},disabled:b,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){return function(e){13===(e.keyCode||e.which)&&(S(),n.current.blur())}(e)},onBlur:function(){f(!0),S()},inputRef:n}),Object(k.jsx)(oe.a,{onClick:function(){f(!1)}})]})]}),Object(k.jsx)(u.a,{className:m.description,children:Object(k.jsx)(g.a,{children:"This is not your username or pin. This name will be visible to your whatsapp contacts"})}),Object(k.jsxs)(u.a,{className:m.nameContainer,children:[Object(k.jsx)(g.a,{children:"About"}),Object(k.jsx)(g.a,{children:"I am Availabe on whatsapp!!!"})]})]})})),de=Object(i.a)({header:{backgroundColor:"#00bfa5",height:"97px",color:"white",display:"flex","& > *":{marginTop:"auto",padding:"15px",fontWeight:600}},component:{backgroundColor:"#ededed",height:"85%"}}),je=function(e){var t=e.open,n=e.setOpen,a=de(),r=function(){n(!1)};return Object(k.jsxs)(te.a,{open:t,onClose:r,children:[Object(k.jsxs)(u.a,{className:a.header,children:[Object(k.jsx)(ne.a,{style:{cursor:"pointer"},onClick:r}),Object(k.jsx)(g.a,{children:"Profile"})]}),Object(k.jsx)(u.a,{className:a.component,children:Object(k.jsx)(pe,{})})]})},be=Object(i.a)({menuItem:{fontSize:14,padding:"15px 60px 5px 24px",color:"#4a4a4a"},logout:{border:"none !important",boxShadow:"none!important","& > *":{padding:"0px !important"}}}),he=function(){var e=Object(d.e)(),t=be(),n=Object(r.useState)(!1),a=Object(y.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(!1),i=Object(y.a)(o,2),u=i[0],l=i[1],p=Object(r.useContext)(N).setAccount,j=function(){s(!1)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Z.a,{onClick:function(e){s(e.currentTarget)},style:{cursor:"pointer"}}),Object(k.jsxs)($.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:j,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"right"},children:[Object(k.jsx)(ee.a,{className:t.menuItem,onClick:function(){j(),l(!0)},children:"Profile"}),Object(k.jsx)(ee.a,{className:t.menuItem,onClick:j,children:Object(k.jsx)(w.GoogleLogout,{clientId:I,buttonText:"Logout",onLogoutSuccess:function(){p(""),e.push("/")},onFailure:function(){console.log("error")},className:t.logout})})]}),Object(k.jsx)(je,{open:u,setOpen:l})]})},xe=Object(i.a)({header:{height:35,backgroundColor:"#ededed",padding:"10px 16px",display:"flex",alignItems:"center"},avatar:{height:37,width:37,borderRadius:"50%",cursor:"pointer"},icons:{marginLeft:"auto","& > *":{marginLeft:2,padding:8,color:"#919191"},"& :first-child":{fontSize:22,marginRight:8,marginTop:3}}}),fe=function(){var e=Object(r.useContext)(N).account,t=xe(),n=Object(r.useState)(!1),a=Object(y.a)(n,2),c=a[0],s=a[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(u.a,{className:t.header,children:[Object(k.jsx)("img",{src:e.imageUrl,alt:"display-picture",className:t.avatar,onClick:function(){s(!0)}}),Object(k.jsxs)(u.a,{className:t.icons,children:[Object(k.jsx)(X.a,{}),Object(k.jsx)(he,{})]})]}),Object(k.jsx)(je,{open:c,setOpen:s})]})},ge=Object(r.createContext)(null),me=function(e){var t=e.children,n=Object(r.useState)({}),a=Object(y.a)(n,2),c=a[0],s=a[1];return Object(k.jsx)(ge.Provider,{value:{person:c,setPerson:s},children:t})},Oe=Object(i.a)({displayPicture:{width:50,height:50,borderRadius:"50%",padding:"0px 14px"},container:{display:"flex",height:40,padding:"13px 0px",cursor:"pointer"},timestamp:{fontSize:12,marginLeft:"auto",marginRight:"20px",color:"#00000099"},text:{color:"#rgba(0,0,0,0.6)",fontSize:"14px"}}),ve=function(e){var t=e.user,n=Object(r.useContext)(N),a=n.account,c=n.flag,s=Object(r.useContext)(ge),o=(s.person,s.setPerson),i=Oe(),l=Object(r.useState)({}),p=Object(y.a)(l,2),d=p[0],j=p[1],b=t.imageUrl;Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({senderId:a.user_id,receiverId:t.user_id});case 2:n=e.sent,console.log(n),j({text:n.message,timestamp:n.updatedAt});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]);var f=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t),e.next=3,E({senderId:a.user_id,receiverId:t.user_id});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{className:i.container,onClick:function(){return f()},children:[Object(k.jsx)(u.a,{children:Object(k.jsx)("img",{src:b,alt:"dp-img",className:i.displayPicture})}),Object(k.jsxs)(u.a,{style:{width:"100%"},children:[Object(k.jsxs)(u.a,{style:{display:"flex"},children:[Object(k.jsx)(g.a,{children:t.name}),d.text&&Object(k.jsxs)(g.a,{className:i.timestamp,children:[new Date(d.timestamp).getHours(),":",new Date(d.timestamp).getMinutes()]})]}),Object(k.jsx)(u.a,{children:Object(k.jsx)(g.a,{className:i.text,children:d.text})})]})]})},we=Object(i.a)({component:{height:"81vh",overflow:"overlay"}}),ye=function(e){var t=e.input,n=Object(r.useState)([]),a=Object(y.a)(n,2),c=a[0],s=a[1],o=Object(r.useContext)(N),i=o.account,l=o.socket,p=o.setActiveUsers,d=we();return Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,console.log(t),s(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(r.useEffect)((function(){l.current.emit("addUser",i.user_id),l.current.on("getUsers",(function(e){p(e)}))}),[i]),Object(k.jsx)(u.a,{className:d.component,children:c?c.map((function(e,n){if(i.user_id!=e.user_id)return e.name.indexOf(t)>-1?Object(k.jsx)(ve,{user:e},n):""})):"Loading..."})},Ce=function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],a=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(fe,{}),Object(k.jsx)(Y,{setInput:a}),Object(k.jsx)(ye,{input:n})]})},ke=Object(i.a)({header:{display:"flex",height:35,background:"#ededed",padding:"10px 16px",alignItems:"center"},dp:{width:37,height:37,borderRadius:"50%",padding:"0 2px"},name:{marginLeft:"10px"},status:{fontSize:12,marginLeft:10,color:"rgb(0,0,0,0.6)"},rightComponent:{marginLeft:"auto","& > *":{padding:"8px",fontSize:22,color:"#919191"}}}),Ne=function(){var e=Object(r.useContext)(ge).person,t=Object(r.useContext)(N).activeUsers,n=ke();return Object(k.jsxs)(u.a,{className:n.header,children:[Object(k.jsx)("img",{src:e.imageUrl,alt:"person-img",className:n.dp}),Object(k.jsxs)(u.a,{children:[Object(k.jsx)(g.a,{className:n.name,children:e.name}),Object(k.jsx)(g.a,{className:n.status,children:(null===t||void 0===t?void 0:t.find((function(t){return t.userId===e.user_id})))?"Online":"Offline"})]}),Object(k.jsxs)(u.a,{className:n.rightComponent,children:[Object(k.jsx)(J.a,{}),Object(k.jsx)(Z.a,{})]})]})},Se=n(129),Ie=n(245),_e=n(246),Ue=n(247),Pe=Object(i.a)((function(e){return{footer:{height:"52px",background:"#ededed",width:"100%",display:"flex",alignItems:"center",padding:"0 15px","& > *":{margin:"5px",color:"#919191"}},clipicons:{transform:"rotate(40deg)"},inputRoot:{width:"100%"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"25px",fontSize:14,width:"100%",height:20},searchbox:{background:"#ffffff",borderRadius:18,width:"calc(95% - 100px)"}}})),Fe=function(e){var t=e.sendText,n=e.setValue,a=e.value,r=Pe();return Object(k.jsxs)(u.a,{className:r.footer,children:[Object(k.jsx)(Ie.a,{}),Object(k.jsx)(_e.a,{className:r.clipicons}),Object(k.jsx)(u.a,{className:r.searchbox,children:Object(k.jsx)(K.a,{placeholder:"Type a Message",classes:{root:r.inputRoot,input:r.inputInput},inputProps:{"aria-label":"search"},onKeyPress:function(e){return t(e)},onChange:function(e){return n(e.target.value)},value:a})}),Object(k.jsx)(Ue.a,{})]})},Te=n(58),Ee=Object(i.a)({wrapper:{background:"#ffffff",padding:5,maxWidth:"60%",display:"flex",borderRadius:"10px",width:"fit-content",wordBreak:"break-word"},text:{fontSize:14,padding:"0px 25px 0 5px"},time:(a={fontSize:10,marginTop:"auto"},Object(Te.a)(a,"marginTop",6),Object(Te.a)(a,"color","#919191"),Object(Te.a)(a,"wordBreak","keep-all"),a),own:{background:"#dcf8c6",padding:"5px",maxWidth:"60%",display:"flex",borderRadius:"10px",width:"fit-content",wordBreak:"break-word",marginLeft:"auto"}}),Ae=function(e){var t=e.message,n=Object(r.useContext)(N).account,a=Ee(),c=function(e){return e<10?"0"+e:e};return Object(k.jsxs)(u.a,{className:n.user_id===t.sender?a.own:a.wrapper,children:[Object(k.jsx)(g.a,{className:a.text,children:t.text}),Object(k.jsxs)(g.a,{className:a.time,children:[c(new Date(t.createdAt).getHours()),":",c(new Date(t.createdAt).getMinutes())]})]})},We=Object(i.a)({wrapper:{backgroundImage:"url(".concat("https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png",")"),backgroundSize:"50%"},component:{height:"78vh",overflow:"scroll"},container:{padding:"1px 80px"}}),Le=function(e){var t,n=e.person,a=e.conversation,c=Object(r.useRef)(),s=Object(r.useState)(""),o=Object(y.a)(s,2),i=o[0],l=o[1],p=Object(r.useContext)(N),d=p.account,j=p.socket,b=p.flag,f=p.setFlag,g=We(),m=Object(r.useState)([]),O=Object(y.a)(m,2),v=O[0],w=O[1],C=Object(r.useState)(null),S=Object(y.a)(C,2),I=S[0],_=S[1];Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(a._id);case 2:t=e.sent,w(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[null===a||void 0===a?void 0:a._id,n.user_id,b]),Object(r.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),[v]),Object(r.useEffect)((function(){j.current.on("getMessage",(function(e){_({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(r.useEffect)((function(){var e;I&&(null===a||void 0===a||null===(e=a.members)||void 0===e?void 0:e.includes(I.sender))&&w((function(e){return[].concat(Object(Se.a)(e),[I])}))}),[I,a]);var U=null===a||void 0===a||null===(t=a.members)||void 0===t?void 0:t.find((function(e){return e!==d.user_id})),P=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,i){e.next=3;break}return e.abrupt("return");case 3:if(13!==n){e.next=12;break}return r={sender:d.user_id,conversationId:a._id,text:i},j.current.emit("sendMessage",{senderId:d.user_id,receiverId:U,text:i}),e.next=8,W(r);case 8:c=e.sent,console.log(c),l(""),f((function(e){return!e}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(u.a,{className:g.wrapper,children:[Object(k.jsx)(u.a,{className:g.component,children:v&&v.map((function(e,t){return Object(k.jsx)(u.a,{className:g.container,ref:c,children:Object(k.jsx)(Ae,{message:e})},t)}))}),Object(k.jsx)(Fe,{sendText:P,setValue:l,value:i})]})},ze=function(){var e=Object(r.useContext)(N).account,t=Object(r.useContext)(ge).person,n=Object(r.useState)({}),a=Object(y.a)(n,2),c=a[0],s=a[1];return Object(r.useEffect)((function(){var n=function(){var n=Object(x.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A({senderId:e.user_id,receiverId:t.user_id});case 2:a=n.sent,s(a);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[t.user_id]),Object(k.jsxs)(u.a,{children:[Object(k.jsx)(Ne,{}),Object(k.jsx)(Le,{conversation:c,person:t})]})},Re=Object(i.a)({component:{background:"#f8f9f8",height:"100%",padding:"50px 0",textAlign:"center"},image:{width:420}}),Be=function(){var e=Re();return Object(k.jsx)(u.a,{className:e.component,children:Object(k.jsx)("img",{src:"https://ik.imagekit.io/ag/wp-content/uploads/2015/01/QR-connected.png",alt:"cover",className:e.image})})},De=Object(i.a)({component:{display:"flex"},leftComponent:{minWidth:"380px"},rightComponent:{borderLeft:"1px solid rgba(0,0,0,0.14)",width:"70%",minWidth:"300px",height:"100%"}}),Me=Object(v.a)({dialogPaper:{height:"95%",width:"91%",maxHeight:"100%",maxWidth:"100%",overflow:"hidden"}})((function(e){var t=e.classes,n=Object(r.useContext)(ge).person,a=De();return Object(k.jsx)(f.a,{open:!0,classes:{paper:t.dialogPaper},BackdropProps:{style:{backgroundColor:"unset"}},children:Object(k.jsxs)(u.a,{className:a.component,children:[Object(k.jsx)(u.a,{className:a.leftComponent,children:Object(k.jsx)(Ce,{})}),Object(k.jsx)(u.a,{className:a.rightComponent,children:Object.keys(n).length?Object(k.jsx)(ze,{}):Object(k.jsx)(Be,{})})]})})})),He=Object(i.a)({loginHeader:{height:"200px",background:"#128c7e",boxShadow:"none"},header:{height:"115px",background:"#128c7e",boxShadow:"none"},component:{background:"#DCDCDC",height:"100vh"}}),qe=function(){var e=Object(j.a)(),t=He(),n=Object(r.useContext)(N).account;return Object(k.jsxs)(u.a,{className:t.component,children:[Object(k.jsx)(l.a,{className:n?t.header:t.loginHeader,children:Object(k.jsx)(p.a,{})}),n?Object(k.jsx)(Me,{}):Object(k.jsxs)(d.b,{history:e,children:[Object(k.jsx)(d.a,{exact:!0,path:"/",component:M}),Object(k.jsx)(d.a,{exact:!0,path:"/sawo-auth",component:G})]})]})},Ve=n(127),Ge=n(250),Ke=Object(r.createContext)(null),Je=function(e){var t=e.children,n=Object(Ve.a)({overrides:{MuiDrawer:{paperAnchorLeft:{height:"95%",top:"16px",width:"30%",left:"58px",boxShadow:"none"}},MuiBackdrop:{root:{backgroundColor:"unset"}}}});return Object(k.jsx)(Ke.Provider,{children:Object(k.jsx)(Ge.a,{theme:n,children:t})})};var Qe=function(){return Object(k.jsx)("div",{children:Object(k.jsx)(me,{children:Object(k.jsx)(Je,{children:Object(k.jsx)(S,{children:Object(k.jsx)(qe,{})})})})})},Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,255)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(Qe,{})}),document.getElementById("root")),Ye()}},[[199,1,2]]]);
//# sourceMappingURL=main.f276cdd6.chunk.js.map